{{ define "content" }}
  <div class="container mx-auto p-4 flex flex-col gap-4">
    <div class="text-xl font-bold">books</div>
    <div>
      {{ block "book-form" .BookFormData }}{{ end }}
      {{ block "book-list" .BookListData }}{{ end }}
    </div>
  </div>
{{ end }}

{{ define "book-form" }}
  <form
    class="flex flex-col gap-2 bg-slate-100 p-4 rounded-md"
    hx-post="/actions/books"
    hx-swap="outerHTML"
  >
    <div class="">
      <label for="title">Title</label>
      <input
        class="border-2 border-slate-200 rounded-md p-2"
        id="title"
        type="text"
        name="title"
        placeholder="Title"
        value="{{ .Title }}"
      />
    </div>
    <div class="flex flex-col gap-2 ">
      <label for="author">Author</label>
      <input
        class="border-2 border-slate-200 rounded-md p-2"
        id="author"
        type="text"
        name="author"
        placeholder="Author"
        value="{{ .Author }}"
      />
    </div>
    {{ block "error" . }}
      <div class="text-red-500">{{ .Error }}</div>
    {{ end }}
    <input
      class="bg-blue-500 text-white rounded-md p-2"
      type="submit"
      value="Create"
    />
  </form>
{{ end }}

{{ define "book-list" }}
  <div id="book-list" class="flex flex-col gap-2 bg-slate-100 p-4 rounded-md">
    <div class="text-xl font-bold">Books</div>
    <!-- pagination -->
    <div class="flex justify-between">
      <button
        class="bg-blue-500 text-white rounded-md p-2 disabled:opacity-50 disabled:cursor-not-allowed"
        hx-get="/actions/books?page={{ .PrevPage }}"
        hx-swap="outerHTML"
        hx-target="#book-list"
        hx-indicator="#loading-indicator"
        {{ if not .HasPrev }}
          disabled
        {{ end }}
      >
        Previous
      </button>
      <div class="text-sm text-gray-500">
        <div>current page: {{ .CurrentPage }}</div>
        <div>total pages: {{ .TotalPages }}</div>
      </div>
      <button
        class="bg-blue-500 text-white rounded-md p-2 disabled:opacity-50 disabled:cursor-not-allowed"
        hx-get="/actions/books?page={{ .NextPage }}"
        hx-swap="outerHTML"
        hx-target="#book-list"
        hx-indicator="#loading-indicator"
        {{ if not .HasNext }}
          disabled
        {{ end }}
      >
        Next
      </button>
    </div>
    <div id="book-list-items" class="flex flex-col gap-2">
      {{ range .Books }}
        {{ block "book-item" . }}{{ end }}
      {{ end }}
    </div>
  </div>
{{ end }}

{{ define "oob-book-item" }}
  <div id="book-list-items" hx-swap-oob="afterbegin">
    {{ block "book-item" . }}{{ end }}
  </div>
{{ end }}

{{ define "book-item" }}
  <div class="flex flex-col">
    <div class="text-lg font-bold">Title: {{ .Title }}</div>
    <div class="text-sm text-gray-500">Author: {{ .Author }}</div>
  </div>
{{ end }}
